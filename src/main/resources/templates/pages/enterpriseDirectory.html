<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
	<title>company</title>
	<link rel="stylesheet" href="/css/style.css"/>
</head>
<body>
  <div id="layout"></div>
</body>
<script type="text/javascript" src="/js/menu.js"></script>
<script th:inline="javascript">
  var user = [[${#httpServletRequest.remoteUser}]];
  var adminRole = [[${#httpServletRequest.isUserInRole("ROLE_ADMIN")}]];
  var listUrl;
  if(adminRole){
    listUrl = "/api/enterpriseDirectories?sort=createTime,desc";
  }else{
    listUrl = "/api/enterpriseDirectories/search/findByUsername?name="+user;
    listUrl += "&amp;sort=createTime,desc";
  }
  console.log(listUrl)
</script>
<script type="text/javascript">
//层级，｛标题，URL｝
    var pageParas ={
       columns:[
         {
           title: '企业名称',
           dataIndex: 'enterpriseName',
           key: 'enterpriseName',
           type:"input",
           notNull:true
         },{
           title: '经营范围',
           dataIndex: 'businessScope',
           key: 'businessScope',
           type:"input",
           notNull:true
         },{
           title: '企业地址',
           dataIndex: 'enterpriseaddress',
           key: 'enterpriseaddress',
           type:"input",
           notNull:true
         },{
           title: '成立时间',
           dataIndex: 'establishmentime',
           key: 'establishmentime',
           type:"date",
           notNull:true
         },{
           title: '联系方式',
           dataIndex: 'phone',
           key: 'phone',
           type:"input",
           notNull:true
         },{
           title: '占地面积',
           dataIndex: 'areaCovered',
           key: 'areaCovered',
           type:"input",
           notNull:true
         },{
           title: '规模',
           dataIndex: 'scale',
           key: 'scale',
           type:"input",
           notNull:true
         },{
           title: '总投资',
           dataIndex: 'totalInvestment',
           key: 'totalInvestment',
           type:"inputNumber",
           notNull:true
         },{
           title: '在职人数',
           dataIndex: 'incumbency',
           key: 'incumbency',
           type:"inputNumber",
           notNull:true
         },{
           title: ' 种植面积',
           dataIndex: 'plantingArea',
           key: 'plantingArea',
           type:"input",
           notNull:true
         },{
           title: '种植作物',
           dataIndex: 'raiseCrops',
           dataIndex: 'raiseCrops',
           key: 'raiseCrops',
           type:"input",
           notNull:true
         },{
           title: '营业执照',
           dataIndex: 'businessLicenseUrl',
           key: 'businessLicenseUrl',
           type:"image",
           fileTypeList:"png,jpg,jpeg,gif,bmp,icon",
         },{
           title: '法人身份证照片',
           dataIndex: 'idCardUrl',
           key: 'idCardUrl',
           type:"image",
           fileTypeList:"png,jpg,jpeg,gif,bmp,icon",
         },{
           title: '添加人',
           dataIndex: 'username',
           key: 'username',
           type:"input",
           hiddenInAdd:true,
           notNull:true
         }

      ],  
      resourceUrl:"/api/enterpriseDirectories", //crud
      listUrl:listUrl,  //http://localhost:8083/api/purchaseRecords/search/findByUsername?username=swl
      title : "企业名录",
      uploadUrl:'/api/upload/',//文件上传
      deleteUrl: "/api/delete/enterpriseDirectory",//单数
      defaultOpenKeys:['demo'],
      defaultSelectedKeys:['企业名录']
    }
</script>
<script src="/js/commonV3.js"></script>
<script src="/js/crudLayout-bundle.js"></script>
</html>